(window["webpackJsonploftschool-react-final-project"]=window["webpackJsonploftschool-react-final-project"]||[]).push([[0],{200:function(e,t,a){e.exports=a(344)},340:function(e,t,a){},341:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(14),i=a.n(o),s=a(29),u=a(18),l=a(15),m=a(24),d=a(25),p=a(27),b=a(32),f=a(54),h=a(6),O=a(379),j=a(381),E=a(382),v=a(383),g=a(8),x=a(399),y=a(393),w=a(28),C="".concat("AUTH","/FETCH_AUTH_REQUEST"),k="".concat("AUTH","/FETCH_AUTH_SUCCESS"),N="".concat("AUTH","/FETCH_AUTH_FAILURE"),_="".concat("AUTH","/FETCH_LOGOUT_REQUEST"),S=Object(x.a)(C),A=Object(x.a)(k),F=Object(x.a)(N),T=Object(x.a)(_),L=Object(y.a)((n={},Object(g.a)(n,S,function(){return!1}),Object(g.a)(n,A,function(){return!0}),Object(g.a)(n,F,function(){return!1}),Object(g.a)(n,T,function(){return!1}),n),!1),R=Object(w.c)({isAuthorized:L}),D=function(e){return e.auth.isAuthorized},I=a(9),V=a.n(I),U=a(10),H=function(e,t){return fetch("https://loft-taxi.glitch.me/auth?username=".concat(e,"&password=").concat(t)).then(function(e){return 200!==e.status?Promise.reject(e):e.json()})},M=V.a.mark(B),P=V.a.mark(W),q=V.a.mark(G),z=V.a.mark(J);function B(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.e)(S,W);case 2:case"end":return e.stop()}},M)}function W(e){var t,a,n,r;return V.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,a=t.username,n=t.password,c.next=4,Object(U.a)(H,a,n);case 4:if(!(r=c.sent).success){c.next=11;break}return window.localStorage.setItem("authData",JSON.stringify({username:a,password:n})),c.next=9,Object(U.c)(A(r));case 9:c.next=12;break;case 11:throw new Error(r.error);case 12:c.next=18;break;case 14:return c.prev=14,c.t0=c.catch(0),c.next=18,Object(U.c)(F(c.t0.message));case 18:case"end":return c.stop()}},P,null,[[0,14]])}function G(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.e)(T,function(){window.localStorage.removeItem("authData")});case 2:case"end":return e.stop()}},q)}function J(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.b)(B);case 2:return e.next=4,Object(U.b)(G);case 4:case"end":return e.stop()}},z)}var Q,Y,Z,X,$,K=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=a.props.fetchLogoutRequest;e.preventDefault(),t()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthorized,a=e.classes;return c.a.createElement("div",{className:"Header "+a.root,"data-testid":"Header"},c.a.createElement(O.a,{position:"static",color:"inherit"},c.a.createElement(j.a,null,c.a.createElement(E.a,{variant:"h6",className:a.title},"Loft Taxi"),c.a.createElement(b.c,{to:"/map",className:a.Link,activeClassName:a.NavLink_selected,"data-testid":"MapLink"},c.a.createElement(v.a,{color:"default"},"\u041a\u0430\u0440\u0442\u0430")),c.a.createElement(b.c,{to:"/profile",className:a.Link,activeClassName:a.NavLink_selected,"data-testid":"ProfileLink"},c.a.createElement(v.a,{color:"default"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),t||window.localStorage.getItem("isAuthorized")?c.a.createElement(b.c,{to:"/logout",className:a.Link,onClick:this.handleClick,"data-testid":"LogoutLink"},c.a.createElement(v.a,{color:"default"},"\u0412\u044b\u0439\u0442\u0438")):c.a.createElement(b.c,{to:"/login",className:a.Link,activeClassName:a.NavLink_selected,"data-testid":"LoginLink"},c.a.createElement(v.a,{color:"default"},"\u0412\u043e\u0439\u0442\u0438")))))}}]),t}(r.PureComponent),ee=Object(h.a)(function(e){return{root:{flexGrow:1},title:{flexGrow:1},Link:{textDecoration:"none"},NavLink_selected:{"& .MuiButton-text":{background:"none",color:"#f48fb1",cursor:"default"}}}})(K),te={fetchLogoutRequest:T},ae=Object(s.b)(function(e){return{isAuthorized:D(e)}},te)(Object(f.g)(ee)),ne=a(23),re=a(396),ce=a(72),oe=a(34),ie=a(388),se=a(389),ue=a(390),le=oe.object().shape({username:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435").email("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430").matches(/^(test@test.com)$/,"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"),password:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435").matches(/^(123123)$/,"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c")}),me=function(e){return c.a.createElement(re.a,Object.assign({},Object(ce.a)(e),{onChange:function(t){var a=t.target.value;e.form.setFieldValue(e.field.name,a||"")}}))},de=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.isAuthorized?this.renderApp():this.renderLogin()}},{key:"renderApp",value:function(){return c.a.createElement(f.a,{to:"/map"})}},{key:"renderLogin",value:function(){var e=this.props,t=e.fetchAuthRequest,a=e.classes;return c.a.createElement("div",{className:"Login","data-testid":"Login"},c.a.createElement(ie.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.Grid},c.a.createElement(se.a,{className:a.Card},c.a.createElement(ue.a,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2",className:a.title},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(ne.c,{initialValues:{username:"",password:""},validationSchema:le,onSubmit:function(e){var a=e.username,n=e.password;t({username:a,password:n})},render:function(e){var t=e.isValid,n=e.submitForm;return c.a.createElement(ne.b,null,c.a.createElement(ie.a,{container:!0,direction:"column",justify:"space-around","align-items":"center",className:a.FormGrid},c.a.createElement(ne.a,{type:"email",name:"username",label:"\u042d\u043b. \u043f\u043e\u0447\u0442\u0430",component:me}),c.a.createElement(ne.a,{type:"password",name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",component:me}),c.a.createElement(v.a,{className:a.Button,"data-testid":"SignInButton",type:"submit",onClick:n,variant:"outlined",color:"primary",disabled:!t},"\u0412\u043e\u0439\u0442\u0438")))}})))))}}]),t}(r.PureComponent),pe=Object(h.a)(function(e){return{Grid:{minHeight:"100vh"},title:{textAlign:"center"},Card:{boxSizing:"border-box",minWidth:"25%",maxWidth:"25%",padding:10},FormGrid:{minHeight:200},Button:{maxWidth:83}}})(de),be={fetchAuthRequest:S},fe=Object(s.b)(function(e){return{isAuthorized:D(e)}},be)(Object(f.g)(pe)),he=a(2),Oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).renderRoute=function(e){var t=a.props,n=t.isAuthorized,r=t.component;return n||window.localStorage.getItem("authData")?c.a.createElement(r,e):c.a.createElement(f.a,{to:"/login"})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.isAuthorized,e.component,Object(he.a)(e,["isAuthorized","component"]));return c.a.createElement(f.b,Object.assign({},t,{render:this.renderRoute}))}}]),t}(r.PureComponent),je=Object(s.b)(function(e){return{isAuthorized:D(e)}})(Oe),Ee="pk.eyJ1IjoiaWx5YXNpZG9yY2hpayIsImEiOiJjazAxYTFpMHQxbWx5M2ZvMWVobDNsY3djIn0.A74tfZkLNWZ1lhs6NvYMeA",ve="".concat("MAP","/FETCH_MAP_REQUEST"),ge="".concat("MAP","/FETCH_MAP_SUCCESS"),xe="".concat("MAP","/FETCH_MAP_FAILURE"),ye="".concat("MAP","/FETCH_ADDRESS_LIST_REQUEST"),we="".concat("MAP","/FETCH_ADDRESS_LIST_SUCCESS"),Ce="".concat("MAP","/FETCH_ADDRESS_LIST_FAILURE"),ke=Object(x.a)(ve),Ne=Object(x.a)(ge),_e=Object(x.a)(xe),Se=Object(x.a)(ye),Ae=Object(x.a)(we),Fe=Object(x.a)(Ce),Te=Object(y.a)((Q={},Object(g.a)(Q,Se,function(e){return e}),Object(g.a)(Q,Ae,function(e,t){return t.payload.addresses}),Object(g.a)(Q,Fe,function(e){return e}),Q),{}),Le=Object(w.c)({addressList:Te}),Re=a(130),De=a.n(Re),Ie=null,Ve=function(e){return De.a.accessToken=Ee,Ie=new De.a.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v9",center:[30.2656504,59.8029126],zoom:15})},Ue=function(){return fetch("https://loft-taxi.glitch.me/addressList").then(function(e){return 200!==e.status?Promise.reject(e):e.json()})},He=function(e,t){return fetch("https://loft-taxi.glitch.me/route?address1=".concat(e,"&address2=").concat(t)).then(function(e){return 200!==e.status?Promise.reject(e):e.json()})},Me=function(e){Ie.getLayer("route")?Ie.getSource("route").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}]}):Ie.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#c2423a","line-width":8}})},Pe=function(){Ie.removeLayer("route"),Ie.removeSource("route")},qe=function(e){Ie.flyTo({center:e,zoom:14,bearing:0,speed:1,curve:1})},ze=function(e){return e.map.addressList},Be="".concat("PROFILE","/FETCH_PROFILE_REQUEST"),We="".concat("PROFILE","/FETCH_PROFILE_SUCCESS"),Ge="".concat("PROFILE","/FETCH_PROFILE_FAILURE"),Je=Object(x.a)(Be),Qe=Object(x.a)(We),Ye=Object(x.a)(Ge),Ze=Object(y.a)((Y={},Object(g.a)(Y,Je,function(){return""}),Object(g.a)(Y,Qe,function(e,t){return t.payload.cardName}),Object(g.a)(Y,Ye,function(e,t){return t.payload}),Y),""),Xe=Object(y.a)((Z={},Object(g.a)(Z,Je,function(){return""}),Object(g.a)(Z,Qe,function(e,t){return t.payload.cardNumber}),Object(g.a)(Z,Ye,function(e,t){return t.payload}),Z),""),$e=Object(y.a)((X={},Object(g.a)(X,Je,function(){return""}),Object(g.a)(X,Qe,function(e,t){return t.payload.expDate}),Object(g.a)(X,Ye,function(e,t){return t.payload}),X),""),Ke=Object(y.a)(($={},Object(g.a)($,Je,function(){return""}),Object(g.a)($,Qe,function(e,t){return t.payload.CVV}),Object(g.a)($,Ye,function(e,t){return t.payload}),$),""),et=Object(w.c)({cardName:Ze,cardNumber:Xe,expDate:$e,CVV:Ke}),tt=function(e){return e.profile.cardName},at=function(e){return e.profile.cardNumber},nt=function(e){return e.profile.expDate},rt=function(e){return e.profile.CVV},ct=function(){return JSON.parse(window.localStorage.getItem("profile"))},ot=function(e){window.localStorage.setItem("profile",JSON.stringify(e))},it=V.a.mark(lt),st=V.a.mark(mt),ut=V.a.mark(dt);function lt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.e)(Je,mt);case 2:case"end":return e.stop()}},it)}function mt(e){return V.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(U.a)(ot(e.payload));case 3:return t.next=5,Object(U.c)(Qe(e.payload));case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(U.c)(Ye(t.t0));case 11:case"end":return t.stop()}},st,null,[[0,7]])}function dt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt();case 2:case"end":return e.stop()}},ut)}var pt=V.a.mark(Ot),bt=V.a.mark(jt),ft=V.a.mark(Et),ht=V.a.mark(vt);function Ot(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.e)(ke,jt);case 2:return e.next=4,Object(U.e)(Se,Et);case 4:case"end":return e.stop()}},pt)}function jt(e){var t;return V.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(U.a)(Ve,t);case 4:if(!a.sent){a.next=14;break}return a.next=8,Object(U.c)(Ne());case 8:return a.next=10,Object(U.d)(tt);case 10:if(!a.sent&&!ct()){a.next=14;break}return a.next=14,Object(U.c)(Se());case 14:a.next=20;break;case 16:return a.prev=16,a.t0=a.catch(1),a.next=20,Object(U.c)(_e(a.t0.message));case 20:case"end":return a.stop()}},bt,null,[[1,16]])}function Et(){var e;return V.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(U.a)(Ue);case 3:if(!(e=t.sent)){t.next=7;break}return t.next=7,Object(U.c)(Ae(e));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(U.c)(Fe(t.t0.message));case 13:case"end":return t.stop()}},ft,null,[[0,9]])}function vt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot();case 2:case"end":return e.stop()}},ht)}a(340);var gt,xt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).mapContainer=c.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchMapRequest)(this.mapContainer,Ee)}},{key:"render",value:function(){return c.a.createElement("div",{className:"MapBox",ref:this.mapContainer})}}]),t}(r.Component),yt=Object(s.b)(function(){},{fetchMapRequest:ke})(xt),wt=a(398),Ct="".concat("ROUTE","/FETCH_ROUTE_REQUEST"),kt="".concat("ROUTE","/FETCH_ROUTE_SUCCESS"),Nt="".concat("ROUTE","/FETCH_ROUTE_FAILURE"),_t="".concat("ROUTE","/FETCH_NEW_ROUTE_REQUEST"),St=Object(x.a)(Ct),At=Object(x.a)(kt),Ft=Object(x.a)(Nt),Tt=Object(x.a)(_t),Lt=Object(y.a)((gt={},Object(g.a)(gt,St,function(){return null}),Object(g.a)(gt,At,function(e,t){return t.payload}),Object(g.a)(gt,Ft,function(e,t){return t.payload}),Object(g.a)(gt,Tt,function(){return null}),gt),null),Rt=Object(w.c)({route:Lt}),Dt=function(e){return e.route.route},It=V.a.mark(Pt),Vt=V.a.mark(qt),Ut=V.a.mark(zt),Ht=V.a.mark(Bt),Mt=V.a.mark(Wt);function Pt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.e)(St,qt);case 2:return e.next=4,Object(U.e)(At,zt);case 4:return e.next=6,Object(U.e)(Tt,Bt);case 6:case"end":return e.stop()}},It)}function qt(e){var t,a,n,r;return V.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,a=t.address1,n=t.address2,c.next=4,Object(U.a)(He,a,n);case 4:return r=c.sent,c.next=7,Object(U.c)(At(r));case 7:return c.next=9,Object(U.a)(Me,r);case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(0),c.next=15,Object(U.c)(Ft(c.t0.message));case 15:case"end":return c.stop()}},Vt,null,[[0,11]])}function zt(e){return V.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(U.a)(qe,e.payload[0]);case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),t.t0;case 8:case"end":return t.stop()}},Ut,null,[[0,5]])}function Bt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(U.a)(Pe);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}},Ht,null,[[0,5]])}function Wt(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt();case 2:case"end":return e.stop()}},Mt)}var Gt=oe.object().shape({address1:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441"),address2:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441")}),Jt=function(e){return c.a.createElement(re.a,Object.assign({},Object(ce.a)(e),{onChange:function(t){var a=t.target.value;e.form.setFieldValue(e.field.name,a||"")}}))},Qt=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderMessage",value:function(){var e=this.props.classes;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2"},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),c.a.createElement(E.a,{variant:"body2"},"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\xa0\u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u0435,",c.a.createElement("br",null),"\u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437."),c.a.createElement(b.b,{to:"/profile",className:e.Link},c.a.createElement(v.a,{className:e.Card__Button,variant:"outlined",color:"primary"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")))}},{key:"renderNewOrderForm",value:function(){var e=this.props,t=e.fetchNewRouteRequest,a=e.classes;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2"},"\u0417\u0430\u043a\u0430\u0437 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d"),c.a.createElement(E.a,{variant:"body2"},"\u0422\u0430\u043a\u0441\u0438 \u0443\u0436\u0435 \u0435\u0434\u0435\u0442 \u043a\xa0\u0432\u0430\u043c. \u041f\u0440\u0438\u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e",c.a.createElement("br",null),"\u0447\u0435\u0440\u0435\u0437 10\xa0\u043c\u0438\u043d\u0443\u0442."),c.a.createElement(v.a,{className:a.Card__Button,variant:"outlined",color:"primary",onClick:t},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437\u2026"))}},{key:"renderOrderForm",value:function(){var e=this.props,t=e.addressList,a=e.fetchRouteRequest,n=e.classes,r=Array.isArray(t)?t:[];return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2"},"\u0412\u044b\u0437\u043e\u0432 \u0442\u0430\u043a\u0441\u0438"),c.a.createElement(ne.c,{initialValues:{address1:"",address2:""},validationSchema:Gt,onSubmit:function(e){var t=e.address1,n=e.address2;a({address1:t,address2:n})},render:function(e){var t=e.values,a=e.handleChange,o=e.isValid,i=e.submitForm;return c.a.createElement(ne.b,null,c.a.createElement(ie.a,{container:!0,direction:"column",justify:"space-around","align-items":"start",className:n.FormGrid},c.a.createElement(ne.a,{type:"text",name:"address1",label:"\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",value:t.address1,select:!0,margin:"normal",component:Jt,InputLabelProps:{shrink:!0},onChange:a},r.map(function(e){return c.a.createElement(wt.a,{key:e,value:e},e)})),c.a.createElement(ne.a,{type:"text",name:"address2",label:"\u0410\u0434\u0440\u0435\u0441 \u043f\u0440\u0438\u0431\u044b\u0442\u0438\u044f",value:t.address2,select:!0,margin:"normal",component:Jt,InputLabelProps:{shrink:!0}},r.map(function(e){return e===t.address1?null:c.a.createElement(wt.a,{key:e,value:e},e)})),c.a.createElement(v.a,{className:"".concat(n.Button," ").concat(n.Card__Button),type:"submit",variant:"outlined",color:"primary",disabled:!o,onClick:i},"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438")))}}))}},{key:"render",value:function(){var e=this.props,t=e.cardName,a=e.route,n=e.classes;return c.a.createElement("div",{className:n.MapForm},c.a.createElement(se.a,{className:n.Card},c.a.createElement(ue.a,null,t||ct()?a?this.renderNewOrderForm():this.renderOrderForm():this.renderMessage())))}}]),t}(r.Component),Yt={fetchAddressListRequest:Se,fetchRouteRequest:St,fetchNewRouteRequest:Tt},Zt=Object(s.b)(function(e){return{cardName:tt(e),addressList:ze(e),route:Dt(e)}},Yt)(Object(h.a)(function(e){return{MapForm:{position:"absolute",top:50,left:20},Card:{boxSizing:"border-box",width:480,padding:10},Link:{textDecoration:"none"},Card__Button:{marginTop:20},Button:{maxWidth:160}}})(Qt)),Xt=(a(341),Object(r.memo)(function(){return c.a.createElement("div",{className:"Map"},c.a.createElement(yt,null),c.a.createElement(Zt,null))})),$t=a(181),Kt=a(185),ea=a(182),ta=a(391),aa=oe.object().shape({cardName:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435").matches(/^[A-Za-z]+\s+[A-Za-z]+$/,"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043d\u044b\u043c \u0438\xa0\u043d\u0430\xa0\u043b\u0430\u0442\u0438\u043d\u0438\u0446\u0435"),cardNumber:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435").matches(/^[0-9]+$/,"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b").length(16,"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 16 \u0446\u0438\u0444\u0440"),CVV:oe.string().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435").matches(/^[0-9]+$/,"\u0421VV \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b").length(3,"\u0421VV \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 3 \u0446\u0438\u0444\u0440\u044b")}),na=function(e){return c.a.createElement(re.a,Object.assign({},Object(ce.a)(e),{onChange:function(t){var a=t.target.value;e.form.setFieldValue(e.field.name,a||"")}}))},ra=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={date:new Date("2025-01-01"),dateInputDisabled:!1,isCardAdded:!1},a.handleDateChange=function(e){a.setState({date:e})},a.getFormattedDate=function(e){var t=e.getDate();t<10&&(t="0".concat(t));var a=e.getMonth()+1;a<10&&(a="0".concat(a));var n=e.getFullYear();return"".concat(t,".").concat(a,".").concat(n)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderAlert",value:function(){var e=this.props.classes;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{variant:"body2"},"\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438."),c.a.createElement(b.b,{to:"/map",className:e.Link},c.a.createElement(v.a,{className:e.Card__Button,variant:"outlined",color:"primary"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043a\u0430\u0440\u0442\u0443")))}},{key:"renderForm",value:function(){var e=this,t=this.props,a=t.fetchProfileRequest,n=t.classes,r=ct()?ct():this.props,o=r.cardName,i=r.cardNumber,s=r.expDate,u=r.CVV,l=this.state,m=l.date,d=l.dateInputDisabled;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h6",component:"h6"},"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"),c.a.createElement(ne.c,{initialValues:{cardName:o,cardNumber:i,expDate:s,CVV:u},validationSchema:aa,handleChange:function(e){return Object($t.a)("9999 9999 9999 9999",e.target.value)},onSubmit:function(t){var n=t.cardName,r=t.cardNumber,c=t.CVV;e.setState({dateInputDisabled:!0,isCardAdded:!0});var o=e.getFormattedDate(m);a({cardName:n,cardNumber:r,expDate:o,CVV:c})},render:function(t){var a=t.submitForm,r=t.handleChange;return c.a.createElement(ne.b,{className:"Form"},c.a.createElement(ie.a,{container:!0,spacing:3},c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(ne.a,{type:"text",name:"cardName",label:"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430",fullWidth:!0,component:na})),c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(ne.a,{type:"text",name:"cardNumber",label:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b",fullWidth:!0,component:na,onChange:r})),c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(ea.b,{utils:Kt.a},c.a.createElement(ta.a,{className:n.Form__Input_Date,name:"expDate",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",id:"date-picker-inline",disableToolbar:!0,variant:"inline",format:"MM.dd.yyyy",margin:"normal",fullWidth:!0,value:m,onChange:e.handleDateChange,disabled:d}))),c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(ne.a,{type:"text",name:"CVV",label:"CVV",helperText:"\u0422\u0440\u0438 \u0446\u0438\u0444\u0440\u044b \u043d\u0430 \u0437\u0430\u0434\u043d\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u0430\u0440\u0442\u044b",fullWidth:!0,component:na})),c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary",onClick:a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.isCardAdded;return c.a.createElement("div",{className:"Profile"},c.a.createElement(ie.a,{container:!0,direction:"column",alignItems:"center",className:e.Grid},c.a.createElement(se.a,{className:"".concat(e.Card," ").concat(e.Grid__Card)},c.a.createElement(ue.a,null,c.a.createElement(E.a,{gutterBottom:!0,variant:"h4",component:"h2",className:e.Title},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),t?this.renderAlert():this.renderForm()))))}}]),t}(r.Component),ca={fetchProfileRequest:Je},oa=Object(s.b)(function(e){return{cardName:tt(e),cardNumber:at(e),expDate:nt(e),CVV:rt(e)}},ca)(Object(h.a)(function(e){return{Grid:{minHeight:"100vh"},Title:{textAlign:"center"},Card:{boxSizing:"border-box",minWidth:"60%",maxWidth:"60%",padding:10},Grid__Card:{marginTop:50},Form__Input_Date:{marginTop:0},Link:{textDecoration:"none"},Card__Button:{marginTop:20}}})(ra)),ia=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthorized,a=e.fetchAuthRequest,n=e.cardName,r=window.localStorage.getItem("authData"),c=window.localStorage.getItem("profile");!t&&r&&a(JSON.parse(r)),!n&&c&&Je(JSON.parse(c))}},{key:"render",value:function(){var e,t,a=this.props.isAuthorized,n=window.localStorage.getItem("authData");return a||n?(e="/map",t=Xt):(e="/login",t=fe),c.a.createElement(b.a,null,c.a.createElement(ae,null),c.a.createElement(f.d,null,c.a.createElement(f.b,{path:e,component:t}),c.a.createElement(je,{path:"/map",component:Xt}),c.a.createElement(je,{path:"/profile",component:oa}),c.a.createElement(f.a,{to:e})))}}]),t}(r.Component),sa={fetchAuthRequest:S},ua=Object(s.b)(function(e){return{isAuthorized:D(e),cardName:tt(e)}},sa)(ia),la=a(186),ma=V.a.mark(pa),da=Object(w.c)({auth:R,profile:et,map:Le,route:Rt});function pa(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.b)(J);case 2:return e.next=4,Object(U.b)(dt);case 4:return e.next=6,Object(U.b)(vt);case 6:return e.next=8,Object(U.b)(Wt);case 8:case"end":return e.stop()}},ma)}var ba=function(){var e=Object(la.a)(),t=Object(w.e)(da,Object(w.d)(Object(w.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return e.run(pa),t},fa=(a(343),ba());i.a.render(c.a.createElement(s.a,{store:fa},c.a.createElement(ua,null)),document.querySelector(".root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.c2038d05.chunk.js.map